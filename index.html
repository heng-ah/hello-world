<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location, Time & Weather</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .info-section {
            margin: 20px 0;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        #map {
            width: 100%;
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 10px 0;
        }
        .loading {
            text-align: center;
            color: #666;
        }
        .error {
            color: #dc3545;
            background: #f8d7da;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Hi! üëã</h1>
        
        <button onclick="getLocation()">Get My Location, Time & Weather</button>
        <button onclick="generateTodaysTips()">Get Today's Tips</button>
        <button onclick="suggestWhatToEat()">What to Eat Today</button>
        <button id="tomorrowButton" onclick="suggestWhatToEatTomorrow()">What to Eat Tomorrow</button>
        
        <div id="status" class="info-section" style="display: none;">
            <div class="loading">Getting your location...</div>
        </div>
        
        <div id="location-info" class="info-section" style="display: none;">
            <h3>üìç Your Location</h3>
            <p id="coordinates"></p>
            <iframe id="map" src="" frameborder="0"></iframe>
        </div>
        
        <div id="time-info" class="info-section" style="display: none;">
            <h3>üïí Current Time</h3>
            <p id="current-time"></p>
        </div>
        
        <div id="weather-info" class="info-section" style="display: none;">
            <h3>üå§Ô∏è Current Weather</h3>
            <p id="weather-details"></p>
        </div>
        
        <div id="tips-info" class="info-section" style="display: none;">
            <h3>üí° Today's Tips</h3>
            <div id="tips-content"></div>
        </div>
        
        <div id="food-info" class="info-section" style="display: none;">
            <h3>üçΩÔ∏è What to Eat Today</h3>
            <div id="food-content"></div>
        </div>
        
        <div id="food-tomorrow-info" class="info-section" style="display: none;">
            <h3>üçΩÔ∏è What to Eat Tomorrow</h3>
            <div id="food-tomorrow-content"></div>
        </div>
        
        <div id="error" class="error" style="display: none;"></div>
    </div>

    <script>
        function getLocation() {
            if (!navigator.geolocation) {
                showError("Geolocation is not supported by this browser.");
                return;
            }

            document.getElementById('status').style.display = 'block';
            document.getElementById('error').style.display = 'none';

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    
                    showLocationInfo(lat, lon);
                    showMap(lat, lon);
                    showCurrentTime();
                    getWeather(lat, lon);
                },
                function(error) {
                    document.getElementById('status').style.display = 'none';
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            showError("Location access denied by user.");
                            break;
                        case error.POSITION_UNAVAILABLE:
                            showError("Location information is unavailable.");
                            break;
                        case error.TIMEOUT:
                            showError("Location request timed out.");
                            break;
                        default:
                            showError("An unknown error occurred.");
                            break;
                    }
                }
            );
        }

        function showLocationInfo(lat, lon) {
            document.getElementById('status').style.display = 'none';
            document.getElementById('coordinates').textContent = 
                `Latitude: ${lat.toFixed(6)}, Longitude: ${lon.toFixed(6)}`;
            document.getElementById('location-info').style.display = 'block';
        }

        function showMap(lat, lon) {
            const mapSrc = `https://maps.google.com/maps?q=${lat},${lon}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
            document.getElementById('map').src = mapSrc;
        }

        function showCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleString();
            document.getElementById('current-time').textContent = timeString;
            document.getElementById('time-info').style.display = 'block';
        }

        async function getWeather(lat, lon) {
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`);
                const data = await response.json();
                
                const weather = data.current_weather;
                const temp = weather.temperature;
                const windSpeed = weather.windspeed;
                const weatherCode = weather.weathercode;
                
                const weatherDescription = getWeatherDescription(weatherCode);
                
                document.getElementById('weather-details').innerHTML = 
                    `Temperature: ${temp}¬∞C<br>` +
                    `Weather: ${weatherDescription}<br>` +
                    `Wind Speed: ${windSpeed} km/h`;
                document.getElementById('weather-info').style.display = 'block';
            } catch (error) {
                document.getElementById('weather-details').textContent = 
                    'Unable to fetch weather data at this time.';
                document.getElementById('weather-info').style.display = 'block';
            }
        }

        function getWeatherDescription(code) {
            const weatherCodes = {
                0: 'Clear sky',
                1: 'Mainly clear',
                2: 'Partly cloudy',
                3: 'Overcast',
                45: 'Fog',
                48: 'Depositing rime fog',
                51: 'Light drizzle',
                53: 'Moderate drizzle',
                55: 'Dense drizzle',
                61: 'Slight rain',
                63: 'Moderate rain',
                65: 'Heavy rain',
                71: 'Slight snow',
                73: 'Moderate snow',
                75: 'Heavy snow',
                77: 'Snow grains',
                80: 'Slight rain showers',
                81: 'Moderate rain showers',
                82: 'Violent rain showers',
                85: 'Slight snow showers',
                86: 'Heavy snow showers',
                95: 'Thunderstorm',
                96: 'Thunderstorm with hail',
                99: 'Thunderstorm with heavy hail'
            };
            return weatherCodes[code] || 'Unknown weather condition';
        }

        function showError(message) {
            document.getElementById('error').textContent = message;
            document.getElementById('error').style.display = 'block';
        }

        function generateTodaysTips() {
            const tips = [
                "üíß Stay hydrated! Drink at least 8 glasses of water today.",
                "üö∂‚Äç‚ôÄÔ∏è Take a 10-minute walk outside for fresh air and exercise.",
                "üì± Take breaks from screens every 20 minutes to rest your eyes.",
                "üßò‚Äç‚ôÇÔ∏è Practice deep breathing for 5 minutes to reduce stress.",
                "üìö Learn something new today - read an article or watch an educational video.",
                "üë• Reach out to a friend or family member you haven't talked to in a while.",
                "ü•ó Include at least one serving of fruits or vegetables in each meal.",
                "üìù Write down three things you're grateful for today.",
                "üõèÔ∏è Set a consistent bedtime to improve your sleep quality.",
                "üéØ Focus on completing one important task rather than multitasking.",
                "üå± Spend a few minutes in nature or near plants.",
                "üí™ Do some stretching or light exercises to keep your body active.",
                "üìñ Read for pleasure for at least 15 minutes.",
                "üéµ Listen to your favorite music to boost your mood.",
                "üßπ Organize one small area of your living space."
            ];

            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            
            const selectedTips = [];
            for (let i = 0; i < 3; i++) {
                const tipIndex = (dayOfYear + i) % tips.length;
                selectedTips.push(tips[tipIndex]);
            }

            const tipsHtml = selectedTips.map(tip => `<p>${tip}</p>`).join('');
            document.getElementById('tips-content').innerHTML = tipsHtml;
            document.getElementById('tips-info').style.display = 'block';
        }

        function suggestWhatToEat() {
            const mealOptions = {
                breakfast: [
                    "ü•û Pancakes with fresh berries",
                    "üç≥ Scrambled eggs with toast",
                    "ü•£ Oatmeal with banana and honey",
                    "ü•ê Croissant with jam",
                    "üßá Waffles with syrup",
                    "ü•§ Smoothie bowl with granola",
                    "üçû Avocado toast",
                    "ü•Ø Bagel with cream cheese"
                ],
                lunch: [
                    "ü•™ Grilled chicken sandwich",
                    "ü•ó Caesar salad",
                    "üçú Chicken noodle soup",
                    "üåØ Turkey wrap",
                    "üçù Pasta with marinara sauce",
                    "ü•ô Mediterranean pita",
                    "üç≤ Vegetable stir-fry",
                    "ü•ò Rice bowl with vegetables"
                ],
                dinner: [
                    "üçñ Grilled salmon with vegetables",
                    "üçï Homemade pizza",
                    "ü•© Steak with mashed potatoes",
                    "üçó Roasted chicken with rice",
                    "üçõ Curry with naan bread",
                    "üåÆ Tacos with guacamole",
                    "üçù Spaghetti carbonara",
                    "ü•ò Beef stew with bread"
                ],
                snack: [
                    "üçé Fresh apple slices",
                    "ü•ú Mixed nuts",
                    "üßÄ Cheese and crackers",
                    "üçá Grapes",
                    "ü•® Pretzel sticks",
                    "üçì Strawberries with yogurt",
                    "ü•ï Carrot sticks with hummus",
                    "üç™ Homemade cookies"
                ]
            };

            const now = new Date();
            const hour = now.getHours();
            const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));

            let mealType;
            if (hour >= 5 && hour < 11) {
                mealType = 'breakfast';
            } else if (hour >= 11 && hour < 16) {
                mealType = 'lunch';
            } else if (hour >= 16 && hour < 21) {
                mealType = 'dinner';
            } else {
                mealType = 'snack';
            }

            const options = mealOptions[mealType];
            const suggestion = options[dayOfYear % options.length];
            
            const foodHtml = `
                <p><strong>Based on the time (${mealType}):</strong></p>
                <p style="font-size: 18px; margin: 15px 0;">${suggestion}</p>
                <p style="color: #666; font-size: 14px;">Suggestion changes daily!</p>
            `;
            
            document.getElementById('food-content').innerHTML = foodHtml;
            document.getElementById('food-info').style.display = 'block';
        }

        let tomorrowButtonCooldown = null;

        function suggestWhatToEatTomorrow() {
            const button = document.getElementById('tomorrowButton');
            const now = Date.now();
            
            if (tomorrowButtonCooldown && now < tomorrowButtonCooldown) {
                return;
            }

            const mealOptions = {
                breakfast: [
                    "ü•û Pancakes with fresh berries",
                    "üç≥ Scrambled eggs with toast",
                    "ü•£ Oatmeal with banana and honey",
                    "ü•ê Croissant with jam",
                    "üßá Waffles with syrup",
                    "ü•§ Smoothie bowl with granola",
                    "üçû Avocado toast",
                    "ü•Ø Bagel with cream cheese"
                ],
                lunch: [
                    "ü•™ Grilled chicken sandwich",
                    "ü•ó Caesar salad",
                    "üçú Chicken noodle soup",
                    "üåØ Turkey wrap",
                    "üçù Pasta with marinara sauce",
                    "ü•ô Mediterranean pita",
                    "üç≤ Vegetable stir-fry",
                    "ü•ò Rice bowl with vegetables"
                ],
                dinner: [
                    "üçñ Grilled salmon with vegetables",
                    "üçï Homemade pizza",
                    "ü•© Steak with mashed potatoes",
                    "üçó Roasted chicken with rice",
                    "üçõ Curry with naan bread",
                    "üåÆ Tacos with guacamole",
                    "üçù Spaghetti carbonara",
                    "ü•ò Beef stew with bread"
                ]
            };

            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const tomorrowDayOfYear = Math.floor((tomorrow - new Date(tomorrow.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));

            const meals = ['breakfast', 'lunch', 'dinner'];
            const foodHtml = meals.map(mealType => {
                const options = mealOptions[mealType];
                const suggestion = options[tomorrowDayOfYear % options.length];
                return `
                    <p><strong>${mealType.charAt(0).toUpperCase() + mealType.slice(1)}:</strong></p>
                    <p style="font-size: 16px; margin: 10px 0; padding-left: 20px;">${suggestion}</p>
                `;
            }).join('');
            
            const finalHtml = `
                ${foodHtml}
                <p style="color: #666; font-size: 14px; margin-top: 15px;">Tomorrow's suggestions change daily!</p>
            `;
            
            document.getElementById('food-tomorrow-content').innerHTML = finalHtml;
            document.getElementById('food-tomorrow-info').style.display = 'block';

            tomorrowButtonCooldown = now + 1 * 60 * 1000;
            button.disabled = true;
            
            updateTomorrowButtonCountdown();
        }

        function updateTomorrowButtonCountdown() {
            const button = document.getElementById('tomorrowButton');
            const now = Date.now();
            
            if (!tomorrowButtonCooldown || now >= tomorrowButtonCooldown) {
                button.disabled = false;
                button.textContent = 'What to Eat Tomorrow';
                return;
            }
            
            const remaining = Math.ceil((tomorrowButtonCooldown - now) / 1000);
            const minutes = Math.floor(remaining / 60);
            const seconds = remaining % 60;
            
            button.textContent = `Wait ${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            setTimeout(updateTomorrowButtonCountdown, 1000);
        }
    </script>
</body>
</html>